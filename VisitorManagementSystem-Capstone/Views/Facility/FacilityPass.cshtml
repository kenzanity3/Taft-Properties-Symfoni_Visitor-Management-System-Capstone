@{
    Layout = null; // Removes the layout (no header, no nav)
    ViewBag.Title = "My Facility Pass";
}

<!-- Bootstrap & QRCode -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
    body {
        margin: 0;
        padding: 0;
        background: url('https://i.ibb.co/93vs5DkY/cover1.jpg') no-repeat center center fixed;
        background-size: cover;
        font-family: 'Segoe UI', sans-serif;
    }

    .facility-pass-container {
        max-width: 1100px;
        margin: 50px auto;
        display: flex;
        flex-wrap: wrap;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        background-color: #ffffff;
    }

    .form-section, .qr-section {
        flex: 1 1 50%;
        padding: 40px;
    }

        .form-section h2 {
            font-weight: 700;
            margin-bottom: 30px;
            color: #0d6efd;
        }

    .form-label {
        font-weight: 600;
    }

    .form-control, .form-select {
        margin-bottom: 20px;
        padding: 12px;
        font-size: 1rem;
        border-radius: 8px;
    }

    .btn-generate {
        width: 100%;
        padding: 12px;
        font-size: 1.1rem;
        border-radius: 10px;
    }

    .display-info {
        margin-top: 30px;
        font-size: 1rem;
    }

    .qr-section {
        background-color: #f8f9fa;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    #passQR {
        margin-top: 20px;
    }

    .qr-section h4 {
        margin-top: 20px;
        color: #555;
    }
</style>

<div class="facility-pass-container">
    <!-- Form Section -->
    <div class="form-section">
        <h2>Generate Facility Pass</h2>
        <div class="row">
            <div class="col-md-6">
                <label for="facility" class="form-label">Facility</label>
                <select id="facility" class="form-select">
                    <option disabled selected>Select Facility</option>
                    <option value="Swimming Pool">Swimming Pool</option>
                    <option value="Basketball Court">Basketball Court</option>
                    <option value="Gym">Gym</option>
                    <option value="Function Hall">Function Hall</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="date" class="form-label">Date</label>
                <input type="date" id="date" class="form-control" />
            </div>
            <div class="col-md-3">
                <label for="time" class="form-label">Time</label>
                <input type="time" id="time" class="form-control" />
            </div>
            <div class="col-12 mt-3">
                <button class="btn btn-primary btn-generate" onclick="generatePass()">Generate QR Pass</button>
            </div>
        </div>

        <div class="display-info">
            <p><strong>Facility:</strong> <span id="displayFacility">-</span></p>
            <p><strong>Date:</strong> <span id="displayDate">-</span></p>
            <p><strong>Time:</strong> <span id="displayTime">-</span></p>
        </div>
    </div>

    <!-- QR Display Section -->
    <div class="qr-section">
        <div id="passQR"></div>
        <h4>Scan this QR at the facility entrance</h4>
    </div>
</div>

<script>
    function generatePass() {
        const facility = document.getElementById("facility").value;
        const date = document.getElementById("date").value;
        const time = document.getElementById("time").value;

        if (!facility || !date || !time) {
            alert("Please fill all fields.");
            return;
        }

        const passCode = crypto.randomUUID();

        document.getElementById("displayFacility").innerText = facility;
        document.getElementById("displayDate").innerText = date;
        document.getElementById("displayTime").innerText = time;

        document.getElementById("passQR").innerHTML = "";
        new QRCode(document.getElementById("passQR"), {
            text: `Facility: ${facility}\nDate: ${date}\nTime: ${time}\nCode: ${passCode}`,
            width: 200,
            height: 200
        });
    }
</script>
