@model VisitorManagementSystem_Captstone.Models.User

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Symfoni Nichols Registration</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

    <!-- SweetAlert & jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- ✅ Your custom registration styles -->
    <link rel="stylesheet" href="~/css/RegisterIndex.css" />
</head>

<body>
    <!----------------------- Main Container -------------------------->
     <div class="container">
        <form asp-action="Register" class="register-container" method=" post" enctype="multipart/form-data" >
            <!-- Left Column -->
            <div class="left-col">
                <img src="/images/symfoni-nicols-logo.png" alt="Symfoni Logo"/>
                <h3>Symfoni Nichols Condominium</h3>
            </div>

            <!-- Right Column -->
            <div class="right-col">
                <h2>Registration</h2>
                <div class="profile">
                    <label for="ProfilePicture" class="form-label">Profile Picture</label>
                    <input type="file" class="form-control" name="ProfilePicture" accept="image/*" required />
                </div>
                <input type="text" name="Firstname" class="form-control" placeholder="First Name" required />
                <input type="text" name="Middlename" class="form-control" placeholder="Middle Name" />
                <input type="text" name="Lastname" class="form-control" placeholder="Last Name" required />
                <input type="email" name="Email" class="form-control" placeholder="Email" required />
                <input type="tel" name="Contactno" class="form-control" placeholder="Contact No. (09XXXXXXXXX)" pattern="09[0-9]{9}" required />

                <label for="birthdate" class="form-label">Birthdate</label>
                <input type="date" name="Birthdate" id="birthdate" class="form-control" required />

                <input type="text" name="Age" id="age" class="form-control" placeholder="Age" readonly required />

                <input type="password" name="Password" class="form-control" placeholder="Password" required />
                <input type="password" name="Confirmpassword" class="form-control" placeholder="Confirm Password" required />

                <button type="submit" class="btn btn-primary w-100">
                    <i class="fas fa-user-plus me-2"></i> Sign Up
                </button>

                <div class="text-center mt-3 text-small">
                    Already have an account?
                    <a class="mb-0 signup-link" asp-action="Index">Sign In?</a>
                </div>
            </div>
        </form>
    </div>

    <!-- Age Calculator -->
    <script>
        document.getElementById("birthdate").addEventListener("change", function () {
            const birthdate = new Date(this.value);
            const today = new Date();
            let age = today.getFullYear() - birthdate.getFullYear();
            const m = today.getMonth() - birthdate.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birthdate.getDate())) {
                age--;
            }
            document.getElementById("age").value = age;
        });
    </script>

    @if (ViewData["LoginErrorMessage"] != null)
    {
        @if (ViewData["LoginErrorMessage"].ToString() == "Incorrect Username or Password!")
        {
            <script>
                const Toast = Swal.mixin({
                    toast: true,
                    position: "top-end",
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.onmouseenter = Swal.stopTimer;
                        toast.onmouseleave = Swal.resumeTimer;
                    }
                });
                Toast.fire({
                    icon: "error",
                    title: "Username or password is incorrect! Please login again."
                });
            </script>
        }
    }
</body>
</html>
